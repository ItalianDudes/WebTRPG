<!DOCTYPE html>
<!--suppress HtmlFormInputWithoutLabel -->
<html xmlns:th="http://www.thymeleaf.org" lang="it">
    <div class="sheet-tab-proficiencies-main-container">
        <div>
            <table id="armorsProficiencyTable">
                <thead>
                <tr>
                    <th>Competenza Armatura</th>
                    <th>Livello</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div style="text-align:center;">
                <button onclick="newProficiencyRow('armorsProficiencyTable')">Aggiungi</button>
                <button onclick="deleteProficiencyRow('armorsProficiencyTable')">Rimuovi</button>
            </div>
        </div>
        <div>
            <table id="weaponsProficiencyTable">
                <thead>
                <tr>
                    <th>Competenza Arma</th>
                    <th>Livello</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div style="text-align:center;">
                <button onclick="newProficiencyRow('weaponsProficiencyTable')">Aggiungi</button>
                <button onclick="deleteProficiencyRow('weaponsProficiencyTable')">Rimuovi</button>
            </div>
        </div>
        <div>
            <table id="toolsProficiencyTable">
                <thead>
                <tr>
                    <th>Competenza Strumento</th>
                    <th>Livello</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div style="text-align:center;">
                <button onclick="newProficiencyRow('toolsProficiencyTable')">Aggiungi</button>
                <button onclick="deleteProficiencyRow('toolsProficiencyTable')">Rimuovi</button>
            </div>
        </div>
        <div>
            <table id="activitiesProficiencyTable">
                <thead>
                <tr>
                    <th>Competenza Attivit√†</th>
                    <th>Livello</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div style="text-align:center;">
                <button onclick="newProficiencyRow('activitiesProficiencyTable')">Aggiungi</button>
                <button onclick="deleteProficiencyRow('activitiesProficiencyTable')">Rimuovi</button>
            </div>
        </div>
    </div>
    <script th:inline="javascript">
        function createProficiencySelect() {
            const select = document.createElement("select");
            // noinspection JSMismatchedCollectionQueryUpdate
            const proficiencyLevels = /*[[${proficiencyLevelsReadableTexts}]]*/ [];
            proficiencyLevels.forEach(level => {
                const option = document.createElement("option");
                option.value = level;
                option.text = level;
                select.appendChild(option);
            });
            return select;
        }

        function newProficiencyRow(tableId) {
            const table = document.getElementById(tableId).getElementsByTagName("tbody")[0];
            const newRow = table.insertRow();

            const cellProficiencyName = newRow.insertCell(0);
            const inputProficiencyName = document.createElement("input");
            inputProficiencyName.type = "text";
            inputProficiencyName.placeholder = "Inserisci competenza";
            cellProficiencyName.appendChild(inputProficiencyName);

            const cellLivello = newRow.insertCell(1);
            cellLivello.appendChild(createProficiencySelect());
        }

        function deleteProficiencyRow(tableId) {
            const table = document.getElementById(tableId).getElementsByTagName("tbody")[0];
            if (table.rows.length > 0) {
                table.deleteRow(table.rows.length - 1);
            }
        }
    </script>
</html>